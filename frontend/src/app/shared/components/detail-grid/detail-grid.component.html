<div class="detail-grid">
  <div class="detail-header">
    <h3>{{ title() }}</h3>
  </div>

  @if (columns().length === 0 && !loading()) {
    <div class="grid-empty-state">
      <span class="empty-icon">ðŸ“‹</span>
      <p>Select a row above to view details</p>
      <span class="dev-note">Backend Req #004 â€” Waiting for ReadDetailTabs + ReadDetailData procedures from Theo</span>
    </div>
  } @else {
    <p-table
      [value]="rows()"
      [columns]="columns()"
      [lazy]="true"
      [totalRecords]="totalRows()"
      [rows]="pageSize()"
      [first]="first()"
      [paginator]="totalRows() > pageSize()"
      [loading]="loading()"
      [scrollable]="true"
      scrollHeight="flex"
      (onLazyLoad)="onPageChange($event)"
      [showCurrentPageReport]="true"
      currentPageReportTemplate="Showing {first} to {last} of {totalRecords} rows"
      styleClass="p-datatable-sm p-datatable-striped p-datatable-gridlines"
      [tableStyle]="{ 'min-width': '30rem' }"
    >
      <ng-template pTemplate="header" let-columns>
        <tr>
          @for (col of columns; track col) {
            <th>{{ col }}</th>
          }
        </tr>
      </ng-template>
      <ng-template pTemplate="body" let-row let-columns="columns">
        <tr>
          @for (col of columns; track col) {
            <td>{{ row[col] }}</td>
          }
        </tr>
      </ng-template>
      <ng-template pTemplate="emptymessage" let-columns>
        <tr>
          <td [attr.colspan]="columns.length" class="empty-row">
            No detail data
          </td>
        </tr>
      </ng-template>
    </p-table>
  }
</div>
